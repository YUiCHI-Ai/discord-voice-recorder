# Google Cloud Platform設定ガイド

このガイドでは、Discord VC録音ボットで使用するGoogle Drive APIの設定方法を説明します。

## 1. Google Cloud Platformプロジェクトの作成

1. [Google Cloud Console](https://console.cloud.google.com/)にアクセスし、Googleアカウントでログインします。
2. 画面上部の「プロジェクト選択」をクリックし、「新しいプロジェクト」を選択します。
3. プロジェクト名（例: `discord-vc-recorder`）を入力し、「作成」をクリックします。
4. プロジェクトが作成されたら、プロジェクト選択メニューから新しいプロジェクトを選択します。

## 2. Google Drive APIの有効化

1. 左側のナビゲーションメニューから「APIとサービス」→「ライブラリ」を選択します。
2. 検索バーに「Google Drive」と入力し、「Google Drive API」を選択します。
3. 「有効にする」ボタンをクリックしてAPIを有効化します。

## 3. サービスアカウントの作成

1. 左側のナビゲーションメニューから「APIとサービス」→「認証情報」を選択します。
2. 「認証情報を作成」ボタンをクリックし、「サービスアカウント」を選択します。
3. サービスアカウントの詳細を入力します：
   - サービスアカウント名: `discord-vc-recorder`
   - サービスアカウントID: 自動生成されたものを使用するか、カスタムIDを入力
   - サービスアカウントの説明: `Discord VC録音ボット用のサービスアカウント`
4. 「作成して続行」をクリックします。
5. 「ロールを選択」で「基本」→「編集者」を選択します（または必要に応じて権限を調整）。
6. 「完了」をクリックしてサービスアカウントの作成を完了します。

## 4. サービスアカウントキーの作成

1. 作成したサービスアカウントの一覧が表示されるので、該当するサービスアカウントのメールアドレスをクリックします。
2. 「キー」タブを選択し、「鍵を追加」→「新しい鍵を作成」をクリックします。
3. キーのタイプとして「JSON」を選択し、「作成」をクリックします。
4. JSONキーファイルが自動的にダウンロードされます。このファイルを安全に保管してください。

## 5. Google Driveフォルダの設定

1. [Google Drive](https://drive.google.com/)にアクセスします。
2. 「新規」ボタンをクリックし、「フォルダ」を選択します。
3. フォルダ名（例: `Discord録音`）を入力し、「作成」をクリックします。
4. 作成したフォルダを右クリックし、「共有」を選択します。
5. サービスアカウントのメールアドレス（`サービスアカウントID@プロジェクトID.iam.gserviceaccount.com`）を入力し、「編集者」権限を付与して「送信」をクリックします。
6. フォルダのURLからフォルダIDを取得します。URLは以下のような形式です：
   ```
   https://drive.google.com/drive/folders/FOLDER_ID
   ```
   `FOLDER_ID`の部分がフォルダIDです。

## 6. ボットの設定

1. ダウンロードしたJSONキーファイルを`credentials/google-credentials.json`として保存します。
2. `config.json`ファイルを開き、`googleDriveFolderId`の値に先ほど取得したフォルダIDを設定します：
   ```json
   "googleDriveFolderId": "YOUR_FOLDER_ID"
   ```

## 注意事項

- サービスアカウントキー（JSONファイル）は秘密情報です。公開リポジトリにアップロードしないでください。
- Google Cloud Platformの無料枠を使用している場合、APIの使用量に制限があります。大量の録音を行う場合は、課金設定を確認してください。
- サービスアカウントは個人のGoogleアカウントとは別のエンティティです。共有設定を正しく行わないとファイルにアクセスできない場合があります。